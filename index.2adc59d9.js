!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r,n=document.querySelector(".message-start"),o=document.querySelector(".message-win"),c=document.querySelector(".message-lose"),a=document.querySelector(".button"),i=document.querySelectorAll(".field-row"),l=document.getElementsByClassName("field-cell--2048"),u=0,d=!1;function f(){for(var e=0;e<4;e++)for(var t=0;t<4;t++)if(0===r[e][t])return!0;return!1}function s(){if(f())for(var e=!1;!e;){var t=.1>=Math.random()?4:2,n=Math.floor(4*Math.random()),o=Math.floor(4*Math.random());if(0===r[n][o]){r[n][o]=t;var c=document.getElementById("".concat(n,"-").concat(o));c.innerText="".concat(t),c.classList.add("field-cell--".concat(t)),e=!0}}}function v(e,t){e.innerText="",e.classList.value="field-cell",t>0&&(e.innerText=t,e.classList.add("field-cell--".concat(t)))}function m(e){return e.filter(function(e){return 0!==e})}function g(e){var t=e;t=m(t);for(var r=0;r<t.length-1;r++)t[r]===t[r+1]&&(t[r]*=2,t[r+1]=0,u+=t[r]);for(t=m(t);t.length<4;)t.push(0);return t}function y(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}window.onload=function(){!function(){r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(var e=0;e<i.length;e++)for(var t=i[e].querySelectorAll(".field-cell"),n=0;n<t.length;n++){t[n].id="".concat(e,"-").concat(n);var o=r[e][n];v(t[n],o)}}()},a.addEventListener("click",function(){for(var e=0;e<4;e++){for(var t=0;t<4;t++){var i=document.getElementById("".concat(e,"-").concat(t));i.innerText="",i.classList.value="field-cell",r[e][t]=0}u=0,document.querySelector(".game-score").innerText=0}s(),s(),n.classList.add("hidden"),c.classList.add("hidden"),o.classList.add("hidden"),a.classList.remove("start"),a.classList.add("restart"),a.innerText="Restart"}),document.addEventListener("keyup",function(e){"ArrowLeft"===e.code&&function(){for(var e=0;e<4;e++){var n=r[e],o=t(n);n=g(n),r[e]=n;for(var c=0;c<4;c++)v(document.getElementById("".concat(e,"-").concat(c)),r[e][c]);y(o,n)||(d=!0)}}(),"ArrowRight"===e.code&&function(){for(var e=0;e<4;e++){var n=r[e],o=t(n);n.reverse(),(n=g(n)).reverse(),r[e]=n;for(var c=0;c<4;c++)v(document.getElementById("".concat(e.toString(),"-").concat(c.toString())),r[e][c]);y(o,n)||(d=!0)}}(),"ArrowUp"===e.code&&function(){for(var e=0;e<4;e++){var n=[r[0][e],r[1][e],r[2][e],r[3][e]],o=t(n);n=g(n);for(var c=0;c<4;c++)r[c][e]=n[c],v(document.getElementById("".concat(c.toString(),"-").concat(e.toString())),r[c][e]);y(o,n)||(d=!0)}}(),"ArrowDown"===e.code&&function(){for(var e=0;e<4;e++){var n=[r[0][e],r[1][e],r[2][e],r[3][e]],o=t(n);n.reverse(),(n=g(n)).reverse();for(var c=0;c<4;c++)r[c][e]=n[c],v(document.getElementById("".concat(c.toString(),"-").concat(e.toString())),r[c][e]);y(o,n)||(d=!0)}}(),d&&(s(),0!==l.length&&o.classList.remove("hidden"),!function(){if(f())return!0;for(var e=0;e<4;e++)for(var t=0;t<4;t++){var n=r[e][t];if(t>0&&n===r[e][t-1]||t<3&&n===r[e][t+1]||e>0&&n===r[e-1][t]||e<3&&n===r[e+1][t])return!0}return!1}()&&c.classList.remove("hidden")),d=!1,document.querySelector(".game-score").innerText=u})}();
//# sourceMappingURL=index.2adc59d9.js.map
