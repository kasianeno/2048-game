let e;const t=document.querySelector(".message-start"),r=document.querySelector(".message-win"),n=document.querySelector(".message-lose"),l=document.querySelector(".button"),o=document.querySelectorAll(".field-row"),d=document.getElementsByClassName("field-cell--2048");let i=0,c=!1;function s(){for(let t=0;t<4;t++)for(let r=0;r<4;r++)if(0===e[t][r])return!0;return!1}function u(){if(!s())return;let t=!1;for(;!t;){let r=.1>=Math.random()?4:2,n=Math.floor(4*Math.random()),l=Math.floor(4*Math.random());if(0===e[n][l]){e[n][l]=r;let o=document.getElementById(`${n}-${l}`);o.innerText=`${r}`,o.classList.add(`field-cell--${r}`),t=!0}}}function f(e,t){e.innerText="",e.classList.value="field-cell",t>0&&(e.innerText=t,e.classList.add(`field-cell--${t}`))}function a(e){return e.filter(e=>0!==e)}function m(e){let t=e;t=a(t);for(let e=0;e<t.length-1;e++)t[e]===t[e+1]&&(t[e]*=2,t[e+1]=0,i+=t[e]);for(t=a(t);t.length<4;)t.push(0);return t}function g(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}window.onload=function(){!function(){e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(let t=0;t<o.length;t++){let r=o[t].querySelectorAll(".field-cell");for(let n=0;n<r.length;n++){r[n].id=`${t}-${n}`;let l=e[t][n];f(r[n],l)}}}()},l.addEventListener("click",()=>{for(let t=0;t<4;t++){for(let r=0;r<4;r++){let n=document.getElementById(`${t}-${r}`);n.innerText="",n.classList.value="field-cell",e[t][r]=0}i=0,document.querySelector(".game-score").innerText=0}u(),u(),t.classList.add("hidden"),n.classList.add("hidden"),r.classList.add("hidden"),l.classList.remove("start"),l.classList.add("restart"),l.innerText="Restart"}),document.addEventListener("keyup",t=>{"ArrowLeft"===t.code&&function(){for(let t=0;t<4;t++){let r=e[t],n=[...r];r=m(r),e[t]=r;for(let r=0;r<4;r++)f(document.getElementById(`${t}-${r}`),e[t][r]);g(n,r)||(c=!0)}}(),"ArrowRight"===t.code&&function(){for(let t=0;t<4;t++){let r=e[t],n=[...r];r.reverse(),(r=m(r)).reverse(),e[t]=r;for(let r=0;r<4;r++)f(document.getElementById(`${t.toString()}-${r.toString()}`),e[t][r]);g(n,r)||(c=!0)}}(),"ArrowUp"===t.code&&function(){for(let t=0;t<4;t++){let r=[e[0][t],e[1][t],e[2][t],e[3][t]],n=[...r];r=m(r);for(let n=0;n<4;n++)e[n][t]=r[n],f(document.getElementById(`${n.toString()}-${t.toString()}`),e[n][t]);g(n,r)||(c=!0)}}(),"ArrowDown"===t.code&&function(){for(let t=0;t<4;t++){let r=[e[0][t],e[1][t],e[2][t],e[3][t]],n=[...r];r.reverse(),(r=m(r)).reverse();for(let n=0;n<4;n++)e[n][t]=r[n],f(document.getElementById(`${n.toString()}-${t.toString()}`),e[n][t]);g(n,r)||(c=!0)}}(),c&&(u(),0!==d.length&&r.classList.remove("hidden"),!function(){if(s())return!0;for(let t=0;t<4;t++)for(let r=0;r<4;r++){let n=e[t][r];if(r>0&&n===e[t][r-1]||r<3&&n===e[t][r+1]||t>0&&n===e[t-1][r]||t<3&&n===e[t+1][r])return!0}return!1}()&&n.classList.remove("hidden")),c=!1,document.querySelector(".game-score").innerText=i});
//# sourceMappingURL=index.389378a8.js.map
